(window.webpackJsonp=window.webpackJsonp||[]).push([[16,10],{546:function(t,e,n){var content=n(548);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(19).default)("63ab6f58",content,!0,{sourceMap:!1})},547:function(t,e,n){"use strict";n(546)},548:function(t,e,n){var r=n(18)((function(i){return i[1]}));r.push([t.i,".cursor[data-v-b2a260f2]{cursor:pointer}.loading[data-v-b2a260f2]{animation-duration:1s;animation-iteration-count:infinite;animation-name:loading-b2a260f2;background:#fff;border-radius:50%}.loading .img[data-v-b2a260f2]{border-radius:50%;padding:10px}@keyframes loading-b2a260f2{0%{transform:scale(1)}to{transform:scale(1.5)}}",""]),r.locals={},t.exports=r},550:function(t,e,n){"use strict";n.r(e);var r=n(189),o=n(225),l={props:{loading:{type:Boolean,default:!1},textLoad:{type:Boolean,default:!1}}},c=(n(547),n(63)),component=Object(c.a)(l,(function(){var t=this._self._c;return t(o.a,{attrs:{value:this.loading,"z-index":"999"}},[t("div",{staticClass:"loading pa-2"},[t(r.a,{staticClass:"img",attrs:{src:"logo.png",width:"100"}})],1)])}),[],!1,null,"b2a260f2",null);e.default=component.exports},565:function(t){t.exports=JSON.parse('{"a":["#5582b9","#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#607D8B","#9E9E9E"],"d":[{"value":"10:00","text":"10:00-11:00"},{"value":"11:00","text":"11:00-12:00"},{"value":"12:00","text":"12:00-13:00"},{"value":"13:00","text":"13:00-14:00"},{"value":"14:00","text":"14:00-15:00"},{"value":"15:00","text":"15:00-16:00"},{"value":"16:00","text":"16:00-17:00"},{"value":"17:00","text":"17:00-18:00"},{"value":"18:00","text":"18:00-19:00"},{"value":"19:00","text":"19:00-20:00"}],"b":["10","11","12","13","14","15","16","17","18","19","20","21"],"c":["00","05","10","15","20","25","30","35","40","45","50","55"]}')},684:function(t,e,n){"use strict";n.r(e);var r=n(239),o=n(673),l=n(525),c=n(523),d=n(540),v=n(222),f=n(527),m=n(539),_=n(61),h=n(541),x=n(671),k=n(678),w=n(62),y=n(237),E=(n(33),n(8),n(16),n(10),n(17),n(2)),D=n(5),O=(n(12),n(71),n(9),n(3),n(22),n(42),n(44),n(75)),data=n(565);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(E.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={pageTitle:"หน้าแรก",toolbarMode:"hide",validate:function(t){return Object(D.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.params,t.query,n=t.store,"calendar",e.next=4,n.dispatch("menu/validateRole","calendar");case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},data:function(){return{focus:this.$moment().format("YYYY-MM-DD"),type:"month",typeToLabel:{month:"Month",week:"Week",day:"Day","4day":"4 Days"},selectedEvent:{},selectedElement:null,selectedOpen:!1,events:[],colors:["blue","indigo","deep-purple","cyan","green","orange","grey darken-1"],names:["Meeting","Holiday","PTO","Travel","Event","Birthday","Conference","Party"],loading:!1,tab:0}},computed:j(j({},Object(O.c)({calendar:"service/calendar"})),{},{listsBooking:function(){var t=JSON.parse(JSON.stringify(this.calendar));return t=t.filter((function(t){return"booking"==t.type})).map((function(t){return t.start=new Date(t.start),t.end=new Date(t.end),t}))},listsExpenses:function(){var t=JSON.parse(JSON.stringify(this.calendar));return t=t.filter((function(t){return"expenses"==t.type})).map((function(t,i){return t.start=new Date(t.start),t.end=new Date(t.end),t}))},total:function(){try{return this.totalMonthBooking-this.totalMonthExpenses}catch(t){return 0}},totalMonthBooking:function(){if(this.calendar&&this.calendar.length>0){var t=Object.assign([],this.calendar),e=new Date(this.$moment(this.focus).startOf("month")),n=new Date(this.$moment(this.focus).endOf("month"));return t.filter((function(t){return"booking"==t.type&&"สำเร็จ"==t.status})).filter((function(t){return new Date(t.start)>=e&&new Date(t.start)<=n})).reduce((function(t,e){return t+e.total}),0)}return 0},totalMonthExpenses:function(){if(this.calendar&&this.calendar.length>0){var t=Object.assign([],this.calendar),e=new Date(this.$moment(this.focus).startOf("month")),n=new Date(this.$moment(this.focus).endOf("month"));return t.filter((function(t){return"expenses"==t.type})).filter((function(t){return new Date(t.start)>=e&&new Date(t.start)<=n})).reduce((function(t,e){return t+e.total}),0)}return 0},totalDateBookingNow:function(){if(this.calendar&&this.calendar.length>0){var t=Object.assign([],this.calendar),e=new Date(this.$moment(this.focus).startOf("day")),n=new Date(this.$moment(this.focus).endOf("day"));return t.filter((function(t){return"booking"==t.type&&"สำเร็จ"==t.status})).filter((function(t){return new Date(t.start)>e&&new Date(t.start)<n})).reduce((function(t,e){return t+e.total}),0)}return 0},totalDateExpensesNow:function(){if(this.calendar&&this.calendar.length>0){var t=Object.assign([],this.calendar),e=new Date(this.$moment(this.focus).startOf("day")),n=new Date(this.$moment(this.focus).endOf("day"));return t.filter((function(t){return"expenses"==t.type})).filter((function(t){return new Date(t.start)>=e&&new Date(t.start)<=n})).reduce((function(t,e){return t+e.total}),0)}return 0},mobile:function(){return this.$vuetify.breakpoint.width<450},firstTime:function(){return data.d&&data.d.length>0?data.d[0].value.split(":")[0]-1:5},endTime:function(){return data.b&&data.b.length>0?data.b.length+1:18},totalBooking:function(){var t=Object.assign([],this.calendar),e=new Date(this.$moment(this.focus).startOf("month")),n=new Date(this.$moment(this.focus).endOf("month"));return t.filter((function(t){return"booking"==t.type&&"จองคิว"==t.status})).filter((function(t){return new Date(t.start)>=e&&new Date(t.start)<=n})).reduce((function(t,e){return t+e.total}),0)}}),mounted:function(){this.$refs.booking&&this.$refs.booking.checkChange(),this.$refs.expenses&&this.$refs.expenses.checkChange()},methods:j(j({},Object(O.b)({loadDataCalendar:"service/loadDataCalendar",loadInfo:"booking/loadInfo",updateStatus:"booking/update"})),{},{viewDay:function(t){var e=t.date;this.focus=e,this.mobile?this.type="month"==this.type?"day":"month":this.type="month"==this.type?"4day":"month"},getEventColor:function(t){return this.setColor(t)},prev:function(){this.$refs.booking.prev(),this.$refs.expenses.prev()},next:function(){this.$refs.booking.next(),this.$refs.expenses.next()},showEvent:function(t){var e=this,n=t.nativeEvent,r=t.event,o=function(){e.selectedEvent=r,e.selectedElement=n.target,requestAnimationFrame((function(){return requestAnimationFrame((function(){return e.selectedOpen=!0}))}))};this.selectedOpen?(this.selectedOpen=!1,requestAnimationFrame((function(){return requestAnimationFrame((function(){return o()}))}))):o(),n.stopPropagation()},rnd:function(a,b){return Math.floor((b-a+1)*Math.random())+a},isTime:function(t){return this.$moment(t).format("HH:mm")},intervalFormat:function(t){return t.time},intervalFormatExpenses:function(t){},setColor:function(t){return"booking"==t.type?"สำเร็จ"==t.status?"success":"warning":"error"},edit:function(t){return"booking"==t.type?this.$router.replace("/booking/".concat(t.id)):this.$router.replace("/expenses/".concat(t.id))},setDay:function(t){var e=t.event;t.eventParsed,t.day;return e.name},changeStatus:function(object){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=object.id,e.next=4,t.loadInfo(n);case 4:if(!(r=e.sent).status){e.next=22;break}if("จองคิว"!=(o=r.payload).booking_status){e.next=22;break}return o.booking_status="สำเร็จ",o.booking_lists_id=o.booking_lists.lists_id,delete o.booking_lists,delete o._id,e.next=14,t.updateStatus({id:n,form:o});case 14:if(!e.sent.status){e.next=22;break}return t.loading=!0,e.next=19,t.loadDataCalendar();case 19:return e.next=21,t.$nextTick();case 21:t.loading=!1;case 22:t.loading=!1,t.selectedOpen=!1,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),t.loading=!1;case 29:case"end":return e.stop()}}),e,null,[[0,26]])})))()}}),created:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.loadDataCalendar();case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()}},B=n(63),component=Object(B.a)($,(function(){var t=this,e=t._self._c;return e("div",[e(m.a,{staticClass:"fill-height"},[e(d.a,{attrs:{cols:"12"}},[e(l.a,{staticClass:"pa-2",attrs:{outlined:""}},[e(m.a,[e(d.a,{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex justify-space-between align-center"},[e(r.a,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.prev}},[e(v.a,{attrs:{small:""}},[t._v(" mdi-chevron-left ")])],1),t._v(" "),0==t.tab&&t.$refs.booking?e(y.a,[t._v(" "+t._s(t.$refs.booking.title)+" ")]):t._e(),t._v(" "),1==t.tab&&t.$refs.expenses?e(y.a,[t._v(" "+t._s(t.$refs.expenses.title)+" ")]):t._e(),t._v(" "),e(r.a,{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:t.next}},[e(v.a,{attrs:{small:""}},[t._v(" mdi-chevron-right ")])],1)],1)])],1)],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(m.a,{attrs:{"no-gutters":""}},[e(d.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[e(l.a,{staticClass:"pa-4 d-flex justify-space-between align-center rounded-xl",attrs:{outlined:""}},[e("div",[e("small",[e("b",[t._v("ยอดรายรับ ")])]),t._v(" "),e("div",{staticClass:"text-left",class:t.totalDateBookingNow?"success--text":""},[e("b",[t._v(t._s(t._f("numeral")(t.totalDateBookingNow)))])])]),t._v(" "),e("div",{staticClass:"text-center"},[e("small",[e("b",[t._v(" วันที่ ")])]),t._v(" "),e("div",[e("b",[t._v(t._s(new Date(t.focus).toLocaleDateString("TH")))])])]),t._v(" "),e("div",[e("small",[e("b",[t._v("ยอดรายจ่าย")])]),t._v(" "),e("div",{staticClass:"text-right",class:t.totalDateExpensesNow>0?"error--text":""},[e("b",[t._v(t._s(t._f("numeral")(t.totalDateExpensesNow)))])])])])],1),t._v(" "),e(d.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[e(l.a,{staticClass:"pa-4 d-flex justify-space-between align-center rounded-xl",attrs:{outlined:""}},[e("div",[e("small",[e("b",[t._v("รายรับทั้งเดือน")])]),t._v(" "),e("div",{staticClass:"text-left",class:t.totalMonthBooking?"success--text":""},[e("b",[t._v(t._s(t._f("numeral")(t.totalMonthBooking)))])])]),t._v(" "),e("div",[e("small",[e("b",[t._v("ยอดจองเดือนนี้")])]),t._v(" "),e("div",{staticClass:"text-center",class:t.totalBooking?"warning--text":""},[e("b",[t._v(t._s(t._f("numeral")(t.totalBooking)))])])]),t._v(" "),e("div",[e("small",[e("b",[t._v("รายจ่ายทั้งเดือน")])]),t._v(" "),e("div",{staticClass:"text-right",class:t.totalMonthExpenses?"error--text":""},[e("b",[t._v(t._s(t._f("numeral")(t.totalMonthExpenses)))])])])])],1),t._v(" "),e(d.a,{staticClass:"pa-1",attrs:{cols:"12",sm:"6"}},[e(l.a,{staticClass:"pa-4 d-flex justify-space-between align-center rounded-xl",attrs:{outlined:""}},[e("small",[e("b",[t._v("สรุปยอด")])]),t._v(" "),e("div",{staticClass:"text-center",class:t.total>0?"success--text":"error--text"},[e("b",[t._v(t._s(t._f("numeral")(t.total)))])])])],1)],1)],1),t._v(" "),e(d.a,[e(k.a,{staticClass:"mb-2",attrs:{color:t.tab?"error":"success",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(x.a,[t._v(" รายรับ ")]),t._v(" "),e(x.a,[t._v(" รายจ่าย ")])],1),t._v(" "),e(_.a,{attrs:{height:"600"}},[e(o.a,{directives:[{name:"show",rawName:"v-show",value:0==t.tab,expression:"tab == 0"}],ref:"booking",attrs:{color:"primary",events:t.listsBooking,"event-color":t.getEventColor,type:t.type,locale:"TH","interval-format":t.intervalFormat,"first-interval":t.firstTime,"interval-minutes":60,"interval-count":t.endTime},on:{"click:event":t.showEvent,"click:more":t.viewDay,"click:date":t.viewDay},scopedSlots:t._u([{key:"event",fn:function(n){var r=n.event;return[e("span",{staticClass:"px-2"},[t._v(t._s(r.name))])]}}]),model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),t._v(" "),e(o.a,{directives:[{name:"show",rawName:"v-show",value:1==t.tab,expression:"tab == 1"}],ref:"expenses",attrs:{color:"primary",events:t.listsExpenses,"event-color":t.getEventColor,type:t.type,locale:"TH","interval-format":t.intervalFormatExpenses},on:{"click:event":t.showEvent,"click:more":t.viewDay,"click:date":t.viewDay},scopedSlots:t._u([{key:"event",fn:function(n){var r=n.event;return[e("div",{staticClass:"d-flex justify-space-between"},[e("span",{staticClass:"px-2"},[t._v(t._s(r.name))]),t._v(" "),e("span",{staticClass:"px-2"},[t._v(t._s(t._f("numeral")(r.total))+" บ.")])])]}}]),model:{value:t.focus,callback:function(e){t.focus=e},expression:"focus"}}),t._v(" "),e(f.a,{attrs:{"close-on-content-click":!1,activator:t.selectedElement,"offset-x":""},model:{value:t.selectedOpen,callback:function(e){t.selectedOpen=e},expression:"selectedOpen"}},[e(l.a,{attrs:{flat:"","min-width":"200"}},[e(w.a,{attrs:{color:t.setColor(t.selectedEvent),dark:""}},[e(r.a,{attrs:{icon:""},on:{click:function(e){return t.edit(t.selectedEvent)}}},[e(v.a,[t._v("mdi-pencil")])],1),t._v(" "),e(y.a,{domProps:{innerHTML:t._s(t.selectedEvent.name)}}),t._v(" "),e(h.a),t._v(" "),e(r.a,{attrs:{icon:""},on:{click:function(e){t.selectedOpen=!1}}},[e(v.a,[t._v("mdi-close-thick")])],1)],1),t._v(" "),e(c.a,[e("div",[t._v(" คุณ : "+t._s(t.selectedEvent.name)+" ")]),t._v(" "),e("div",[t._v(" วัน : "+t._s(new Date(t.selectedEvent.start).toLocaleDateString("TH"))+" ")]),t._v(" "),e("div",[t._v(" เวลา : "+t._s(t.isTime(t.selectedEvent.start))+" - "+t._s(t.isTime(t.selectedEvent.end))+" ")]),t._v(" "),t.selectedEvent.detail?e("div",[t.selectedEvent.detail.lists_name?e("span",{staticClass:"mr-4"},[t._v(" รายการ : "+t._s(t.selectedEvent.detail.lists_name)+" ")]):t._e()]):t._e(),t._v(" "),t.selectedEvent.detail&&t.selectedEvent.detail.lists_total?e("div",[t._v(" ราคา : "+t._s(t._f("numeral")(t.selectedEvent.detail.lists_total))+" ")]):t._e(),t._v(" "),t.selectedEvent.mascara?e("div",[t._v(" มาสคาร่า : รับ 29 บ. ")]):t._e(),t._v(" "),t.selectedEvent.detail?e("div",[t.selectedEvent.detail.discount?e("span",[t._v(" ส่วนลด : "+t._s(t.selectedEvent.detail.discount)+" ")]):t._e(),t._v(" "),t.selectedEvent.total?e("span",{staticClass:"mr-4"},[t._v(" ราคาสุทธิ : "+t._s(t._f("numeral")(t.selectedEvent.total))+" ")]):t._e()]):t._e(),t._v(" "),t.selectedEvent.detail?e("div",[t._v(" ข้อมูลติดต่อ : "+t._s(t.selectedEvent.detail.social)+" ")]):t._e(),t._v(" "),t.selectedEvent.detail?e("div",[t._v(" เบอร์โทร : "+t._s(t.selectedEvent.detail.phone)+" ")]):t._e(),t._v(" "),t.selectedEvent.remark?e("div",[t._v(" หมายเหตุ : "+t._s(t.selectedEvent.remark)+" ")]):t._e(),t._v(" "),t.selectedEvent.total&&"expenses"==t.selectedEvent.type?e("div",[t._v(" ราคา : "+t._s(t._f("numeral")(t.selectedEvent.total))+" ")]):t._e(),t._v(" "),"จองคิว"==t.selectedEvent.status?e("div",{staticClass:"text-center mt-4"},[e("div",[e(r.a,{attrs:{outlined:"",color:"success",small:""},on:{click:function(e){return t.changeStatus(t.selectedEvent)}}},[t._v("\n                    เปลี่ยนสถานะเป็นสำเร็จ "),e(v.a,{attrs:{color:"success",right:""}},[t._v("mdi-check-circle-outline")])],1)],1)]):t._e()])],1)],1)],1)],1)],1),t._v(" "),t.loading?e("Loader",{attrs:{loading:t.loading}}):t._e()],1)}),[],!1,null,"677dd5f2",null);e.default=component.exports;installComponents(component,{Loader:n(550).default})}}]);